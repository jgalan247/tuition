{% extends 'base.html' %}

{% block title %}Invoice {{ invoice.invoice_number }} - {{ SITE_NAME }}{% endblock %}

{% block content %}
<div class="bg-gray-100 min-h-screen py-8">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mb-6 flex justify-between items-center">
            <a href="{% url 'dashboard:payments' %}" class="text-primary-600 hover:text-primary-700">
                &larr; Back to Payments
            </a>
            <button onclick="window.print()" class="btn btn-secondary text-sm">
                Print Invoice
            </button>
        </div>

        <div class="bg-white rounded-xl shadow-sm p-8 print:shadow-none">
            <!-- Header -->
            <div class="flex justify-between items-start mb-8 pb-8 border-b">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">{{ SITE_NAME }}</h1>
                    <p class="text-gray-600">{{ SITE_TAGLINE }}</p>
                </div>
                <div class="text-right">
                    <h2 class="text-2xl font-bold text-gray-900">INVOICE</h2>
                    <p class="text-gray-600">{{ invoice.invoice_number }}</p>
                </div>
            </div>

            <!-- Details -->
            <div class="grid md:grid-cols-2 gap-8 mb-8">
                <div>
                    <h3 class="text-sm font-semibold text-gray-500 uppercase mb-2">Bill To</h3>
                    <p class="font-semibold text-gray-900">{{ invoice.billing_name }}</p>
                    <p class="text-gray-600">{{ invoice.billing_email }}</p>
                    {% if invoice.billing_address %}
                    <p class="text-gray-600">{{ invoice.billing_address|linebreaks }}</p>
                    {% endif %}
                </div>
                <div class="text-right">
                    <div class="mb-2">
                        <span class="text-sm text-gray-500">Invoice Date:</span>
                        <span class="text-gray-900 ml-2">{{ invoice.created_at|date:"j F Y" }}</span>
                    </div>
                    <div class="mb-2">
                        <span class="text-sm text-gray-500">Payment Date:</span>
                        <span class="text-gray-900 ml-2">{{ payment.paid_at|date:"j F Y" }}</span>
                    </div>
                    <div>
                        <span class="text-sm text-gray-500">Status:</span>
                        <span class="text-green-600 font-semibold ml-2">Paid</span>
                    </div>
                </div>
            </div>

            <!-- Items -->
            <table class="w-full mb-8">
                <thead>
                    <tr class="border-b">
                        <th class="text-left py-3 text-sm font-semibold text-gray-500">Description</th>
                        <th class="text-right py-3 text-sm font-semibold text-gray-500">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b">
                        <td class="py-4">
                            <div class="font-medium text-gray-900">{{ payment.booking.course.title|default:"Tutoring Session" }}</div>
                            <div class="text-sm text-gray-500">
                                {{ payment.booking.date|date:"j F Y" }} - {{ payment.booking.get_session_type_display }}
                                ({{ payment.booking.duration_hours }} hour{% if payment.booking.duration_hours != 1 %}s{% endif %})
                            </div>
                        </td>
                        <td class="py-4 text-right font-medium text-gray-900">{{ payment.amount_display }}</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td class="py-4 text-right font-semibold text-gray-900">Total</td>
                        <td class="py-4 text-right text-xl font-bold text-gray-900">{{ payment.amount_display }}</td>
                    </tr>
                </tfoot>
            </table>

            <!-- Footer -->
            <div class="text-center text-sm text-gray-500 pt-8 border-t">
                <p>Thank you for your business!</p>
                <p class="mt-2">{{ CONTACT_EMAIL }} | {{ CONTACT_PHONE }}</p>
            </div>
        </div>
    </div>
</div>

<style>
@media print {
    nav, footer, .btn { display: none !important; }
    body { background: white !important; }
    .max-w-3xl { max-width: 100% !important; }
}
</style>
{% endblock %}
